# SokobanInator
Tutorial for the base game by [iolivia](https://github.com/iolivia) [here](https://sokoban.iolivia.me/c01-00-intro)!

![icon](https://i.imgur.com/G7UilyN.png)

## The Project

### Aim
Primary Aim: To develop a game in Rust, and learn/practice the Entity Component System software pattern.

Secondary Aim: To develop a fun game!

### Composition
![Rust](https://img.shields.io/badge/Rust-000000?logo=rust&logoColor=white)

This project was wholly written in Rust with the ggez and hecs crates/libraries. The ggez game-engine crate was used to handle resource loading, events and game rendering. hecs (handy ECS) was used as the foundation of the ECS for this project. An Inno script was used to compile the Windows installer; almost entirely generated by Inno Setup Script Wizard.

### Release
This project is currently released on GitHub Releases. The source files were compiled into a .dmg installer for MacOS and .exe Inno installer for Windows.

However, please note that after installing on MacOS, security protections must be bypassed manually in order to open the App, as I am not paying a 99 USD annual subscription for an Apple Developer account so that it can confirm my game does not contain malware, because I am âœ¨BROKEâœ¨ (not really, but 99 USD yearly is insane (Google Play developer accounts are a one-time 25 USD fee), and they just got rid of the student program). You can also download the source code from gh-releases and run it locally if you have Rust installed ðŸ¦€ðŸ¦€ðŸ¦€!

### Links ðŸ”—
- [GitHub Repo](https://github.com/Felix-Lin-8864/sokoban-inator/tree/main)
- [GitHub Releases](https://github.com/Felix-Lin-8864/sokoban-inator/releases/tag/v1.0.0)
- [ggez crate](https://docs.rs/ggez/latest/ggez/index.html)
- [hecs crate](https://docs.rs/hecs/latest/hecs/)

### Credits
The base game was completed by following a [tutorial](https://sokoban.iolivia.me/c01-00-intro). My project builds on this with small tweaks - e.g. universal gray boxes/spots and multi-avatar control - as well as through larger features - e.g. level-progression, random map generation and multi-avatar spawning.

## The Game ðŸŽ®
![Gameplay](https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExcHlhdDNxczB3aXI0azRxaGs5aGtzNWt5a3IwajhqYXozeXZyYjRvOSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/grAtyVu0eMcHgynkJ0/giphy.gif)

### Sokoban
- Win by covering all spots with boxes of a matching colour - gray is a universal colour that matches with anything!
- Every level you get more controllable avatars  - unless a box spawns on them when the new level loads, crushing them mercilessly as they wallow and cry and disappear forever while their comrades blink and blink and blink... However, fewer avatars makes control easier as you progress through the levels, so I guess its a sacrifice for the greater good?
- Press 'R' to give up and restart from level 1... coward...
- Use arrow keys to move! (probably should've led with that)
- You can squash your team against the walls to make their positions more compact.
- Try pushing fellow avatars INto walls! (Hint: if they're in the walls, they can push boxes off the walls (and get the possum out of there (its driving me crazy, I haven't slept since it just scratches and scratches and yowls and scratches (oh, look at that, polysyndeton) at night)))

Please note that "avatar" refers to the "player" entity, and players refer to users playing the game for this document.

### Extra Notes
**THE MULTI-AVATAR SPAWNING AND TEAM SQUISHING ARE DEFINITELY NOT A BUG I FOUND AND KEPT AS IT WAS COOL**

They actually weren't.

When I initially implemented levelling and map re-generation, the multi-avatar spawning was part of a bug where every entity rolled-over to the new one when the player won. I thought the multi-avatar control was cool, and could definitely be utilised to minimise the number of steps necessary to beat a level, so I fixed the bug and implemented this behaviour properly, mainly on lines 122-130 of [map.rs](https://github.com/Felix-Lin-8864/sokoban-inator/blob/v1.0.0/src/map.rs).

Team squishing is rather ordinary; arguably most players would expect such behaviour when an avatar runs into a wall. When I first implemented multi-avatar spawning, I realised that the squishing only worked sometimes depending on the order of avatars when querying the world in input.rs, and wanted to make players figure out which direction(s) they could squish in through trial and error. However, this seemed more tedious than puzzle-like so I fixed it to work regardless of avatar order by using iteration-local Vecs (line 70 of [input.rs](https://github.com/Felix-Lin-8864/sokoban-inator/blob/v1.0.0/src/systems/input.rs).

BUT, if you really think about it, even if I didn't implement them properly, aren't bugs really just unintended functionality at the end of the day??
